2025-11-24 16:02:58 - app.pipeline - INFO - Logging configured: file=/Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/pipeline.log, level=DEBUG
2025-11-24 16:02:58 - app.pipeline - INFO - Processing document: data/archive/mtsamples_pdf/mtsamples_pdf/8.pdf
2025-11-24 16:02:58 - app.pipeline - INFO - Output directory: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8
2025-11-24 16:02:58 - app.pipeline - INFO - Configuration: model=qwen2.5:7b, temperature=0.1
2025-11-24 16:02:58 - app.pipeline - INFO - Execution mode: toc_only=False, summary_only=False, plan_only=False, no_evaluation=False
2025-11-24 16:02:58 - app.pipeline - INFO - [STEP 1] Ingesting document: data/archive/mtsamples_pdf/mtsamples_pdf/8.pdf
2025-11-24 16:02:58 - app.ingestion - INFO - Loading PDF: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/data/archive/mtsamples_pdf/mtsamples_pdf/8.pdf
2025-11-24 16:02:58 - app.ingestion - INFO - Ingested document: 15632 characters, 4 pages, note_id: 8
2025-11-24 16:02:58 - app.pipeline - INFO - ✓ Ingested: 15632 chars, 4 pages, note_id: 8
2025-11-24 16:02:58 - app.pipeline - INFO - Saved canonical text to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/canonical_text.txt
2025-11-24 16:02:58 - app.pipeline - INFO - [STEP 2/6] Detecting sections...
2025-11-24 16:02:58 - app.sections - INFO - Overview section detected: end=182, title=Overview
2025-11-24 16:02:58 - app.sections - INFO - Found 28 section headers (after empty lines, all-caps): ['CLOTHING', 'EXTERNAL EXAMINATION', 'EVIDENCE OF INJURY', 'EVIDENCE OF RECENT MEDICAL TREATMENT', 'OTHER IDENTIFYING FEATURES', 'SCARS', 'TATTOOS', 'INTERNAL EXAMINATION', 'BODY CAVITIES', 'NECK', 'CARDIOVASCULAR SYSTEM', 'RESPIRATORY SYSTEM', 'HEPATOBILIARY SYSTEM', 'HEMOLYMPHATIC SYSTEM', 'GASTROINTESTINAL SYSTEM', 'UROGENITAL SYSTEM', 'ENDOCRINE SYSTEM', 'MUSCULOSKELETAL SYSTEM', 'CENTRAL NERVOUS SYSTEM', 'SPECIAL PROCEDURES', 'FINAL PATHOLOGICAL DIAGNOSES', 'I. ACUTE COMBINED DRUG INTOXICATION', 'VII. FIBROUS PLEURAL ADHESIONS.', 'VIII. CHRONIC THYROIDITIS (HASHIMOTO THYROIDITIS).', 'X. MINIMAL, INSIGNIFICANT MYOCARDIAL FIBROSIS.', 'XI. STATUS POST MEDICAL INTERVENTION.', 'XIV. MINOR CONTUSIONS, POSTERIOR SHOULDERS.', 'OPINION']
2025-11-24 16:02:58 - app.sections - INFO - Found 28 potential section headers
2025-11-24 16:02:58 - app.sections - INFO - Detected 29 sections: ['Overview', 'CLOTHING', 'EXTERNAL EXAMINATION', 'EVIDENCE OF INJURY', 'EVIDENCE OF RECENT MEDICAL TREATMENT', 'OTHER IDENTIFYING FEATURES', 'SCARS', 'TATTOOS', 'INTERNAL EXAMINATION', 'BODY CAVITIES', 'NECK', 'CARDIOVASCULAR SYSTEM', 'RESPIRATORY SYSTEM', 'HEPATOBILIARY SYSTEM', 'HEMOLYMPHATIC SYSTEM', 'GASTROINTESTINAL SYSTEM', 'UROGENITAL SYSTEM', 'ENDOCRINE SYSTEM', 'MUSCULOSKELETAL SYSTEM', 'CENTRAL NERVOUS SYSTEM', 'SPECIAL PROCEDURES', 'FINAL PATHOLOGICAL DIAGNOSES', 'I. ACUTE COMBINED DRUG INTOXICATION', 'VII. FIBROUS PLEURAL ADHESIONS.', 'VIII. CHRONIC THYROIDITIS (HASHIMOTO THYROIDITIS).', 'X. MINIMAL, INSIGNIFICANT MYOCARDIAL FIBROSIS.', 'XI. STATUS POST MEDICAL INTERVENTION.', 'XIV. MINOR CONTUSIONS, POSTERIOR SHOULDERS.', 'OPINION']
2025-11-24 16:02:58 - app.pipeline - INFO - ✓ Detected 29 sections
2025-11-24 16:02:58 - app.pipeline - INFO -   1. Overview (pages 1-1, chars 0-182)
2025-11-24 16:02:58 - app.pipeline - INFO -   2. CLOTHING (pages 1-1, chars 182-303)
2025-11-24 16:02:58 - app.pipeline - INFO -   3. EXTERNAL EXAMINATION (pages 1-1, chars 303-2984)
2025-11-24 16:02:58 - app.pipeline - INFO -   4. EVIDENCE OF INJURY (pages 1-1, chars 2984-3329)
2025-11-24 16:02:58 - app.pipeline - INFO -   5. EVIDENCE OF RECENT MEDICAL TREATMENT (pages 1-1, chars 3329-4426)
2025-11-24 16:02:58 - app.pipeline - INFO -   6. OTHER IDENTIFYING FEATURES (pages 1-1, chars 4426-4505)
2025-11-24 16:02:58 - app.pipeline - INFO -   7. SCARS (pages 1-1, chars 4505-5399)
2025-11-24 16:02:58 - app.pipeline - INFO -   8. TATTOOS (pages 1-2, chars 5399-5952)
2025-11-24 16:02:58 - app.pipeline - INFO -   9. INTERNAL EXAMINATION (pages 2-2, chars 5952-6288)
2025-11-24 16:02:58 - app.pipeline - INFO -   10. BODY CAVITIES (pages 2-2, chars 6288-7107)
2025-11-24 16:02:58 - app.pipeline - INFO -   11. NECK (pages 2-2, chars 7107-7696)
2025-11-24 16:02:58 - app.pipeline - INFO -   12. CARDIOVASCULAR SYSTEM (pages 2-2, chars 7696-8430)
2025-11-24 16:02:58 - app.pipeline - INFO -   13. RESPIRATORY SYSTEM (pages 2-2, chars 8430-8958)
2025-11-24 16:02:58 - app.pipeline - INFO -   14. HEPATOBILIARY SYSTEM (pages 2-2, chars 8958-9313)
2025-11-24 16:02:58 - app.pipeline - INFO -   15. HEMOLYMPHATIC SYSTEM (pages 2-2, chars 9313-9602)
2025-11-24 16:02:58 - app.pipeline - INFO -   16. GASTROINTESTINAL SYSTEM (pages 2-2, chars 9602-10440)
2025-11-24 16:02:58 - app.pipeline - INFO -   17. UROGENITAL SYSTEM (pages 2-2, chars 10440-11174)
2025-11-24 16:02:58 - app.pipeline - INFO -   18. ENDOCRINE SYSTEM (pages 2-3, chars 11174-11492)
2025-11-24 16:02:58 - app.pipeline - INFO -   19. MUSCULOSKELETAL SYSTEM (pages 3-3, chars 11492-12901)
2025-11-24 16:02:58 - app.pipeline - INFO -   20. CENTRAL NERVOUS SYSTEM (pages 3-3, chars 12901-13345)
2025-11-24 16:02:58 - app.pipeline - INFO -   21. SPECIAL PROCEDURES (pages 3-3, chars 13345-13725)
2025-11-24 16:02:58 - app.pipeline - INFO -   22. FINAL PATHOLOGICAL DIAGNOSES (pages 3-3, chars 13725-13755)
2025-11-24 16:02:58 - app.pipeline - INFO -   23. I. ACUTE COMBINED DRUG INTOXICATION (pages 3-3, chars 13755-14780)
2025-11-24 16:02:58 - app.pipeline - INFO -   24. VII. FIBROUS PLEURAL ADHESIONS. (pages 3-3, chars 14780-14812)
2025-11-24 16:02:58 - app.pipeline - INFO -   25. VIII. CHRONIC THYROIDITIS (HASHIMOTO THYROIDITIS). (pages 3-3, chars 14812-14927)
2025-11-24 16:02:58 - app.pipeline - INFO -   26. X. MINIMAL, INSIGNIFICANT MYOCARDIAL FIBROSIS. (pages 3-3, chars 14927-14974)
2025-11-24 16:02:58 - app.pipeline - INFO -   27. XI. STATUS POST MEDICAL INTERVENTION. (pages 3-4, chars 14974-15370)
2025-11-24 16:02:58 - app.pipeline - INFO -   28. XIV. MINOR CONTUSIONS, POSTERIOR SHOULDERS. (pages 4-4, chars 15370-15414)
2025-11-24 16:02:58 - app.pipeline - INFO -   29. OPINION (pages 4-4, chars 15414-15632)
2025-11-24 16:02:58 - app.sections - INFO - Saved ToC to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/toc.json with 29 sections
2025-11-24 16:02:58 - app.pipeline - INFO - ✓ Saved ToC to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/toc.json
2025-11-24 16:02:58 - app.pipeline - INFO - [STEP 3/6] Creating chunks...
2025-11-24 16:02:58 - app.chunks - INFO - Created 29 chunks from 29 sections
2025-11-24 16:02:58 - app.pipeline - INFO - ✓ Created 29 chunks
2025-11-24 16:02:58 - app.chunks - INFO - Saved 29 chunks to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/chunks.json
2025-11-24 16:02:58 - app.pipeline - INFO - ✓ Saved chunks to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/chunks.json
2025-11-24 16:02:58 - app.pipeline - INFO - Initializing LLM client...
2025-11-24 16:02:58 - app.llm - INFO - ✓ Apple Silicon detected - MPS environment variables set for Ollama
2025-11-24 16:02:58 - app.llm - DEBUG - Note: Install PyTorch for MPS availability verification
2025-11-24 16:02:58 - app.llm - INFO - LLM client configured for GPU acceleration (MPS)
2025-11-24 16:02:58 - app.llm - INFO - Initialized LLM client with model: qwen2.5:7b, temperature: 0.1
2025-11-24 16:02:58 - app.pipeline - INFO - ✓ LLM client initialized (model: qwen2.5:7b)
2025-11-24 16:02:58 - app.pipeline - INFO - [STEP 4/6] Generating summary...
2025-11-24 16:02:58 - app.pipeline - INFO -   Processing 29 chunks at once...
2025-11-24 16:02:58 - app.summarizer - INFO - Calling LLM (model: qwen2.5:7b, temperature: 0.1)
2025-11-24 16:02:58 - app.summarizer - DEBUG - Prompt preview: # Text Summary Prompt

## SYSTEM ROLE

You are a medical documentation extraction assistant.

Your job is to extract only information that is explicitly present in the provided chunks of a clinical no...
2025-11-24 16:02:58 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=None socket_options=None
2025-11-24 16:02:58 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x114ec3510>
2025-11-24 16:02:58 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 16:02:58 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 16:02:58 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 16:02:58 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 16:02:58 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 16:03:12 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 21:03:12 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 16:03:12 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 16:03:12 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 16:03:54 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 16:03:54 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 16:03:54 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 16:03:54 - app.summarizer - DEBUG - LLM response (attempt 1): ```json
[
    {
        "text": "ABC was a 39-year-old white female.",
        "source": "MUSCULOSKELETAL SYSTEM"
    },
    {
        "text": "The brain has a normal convolutional pattern and weighs 1300 grams.",
        "source": "CENTRAL NERVOUS SYSTEM"
    },
    {
        "text": "There is no epidural, subdural or subarachnoid hemorrhage.",
        "source": "CENTRAL NERVOUS SYSTEM"
    },
    {
        "text": "The adrenal glands have a normal configuration with the golden yellow cortices ...
2025-11-24 16:03:54 - app.summarizer - WARNING - JSON parsing failed (attempt 1/2): Response is a JSON array, but must be a JSON object with keys like 'patient_snapshot', 'key_problems', etc.
2025-11-24 16:03:54 - app.summarizer - INFO - Retrying with JSON parsing feedback...
2025-11-24 16:03:55 - app.summarizer - DEBUG - Retrying with JSON parsing feedback (attempt 2): Response is a JSON array, but must be a JSON object with keys like 'patient_snapshot', 'key_problems', etc.
2025-11-24 16:03:55 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 16:03:55 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 16:03:55 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 16:03:55 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 16:03:55 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 16:04:08 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 21:04:08 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 16:04:08 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 16:04:08 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 16:04:52 - app.summarizer - DEBUG - LLM response (attempt 2): ```json
{
    "patient_snapshot": {
        "age": "39-year-old",
        "race": "white female"
    },
    "key_problems": [
        {
            "text": "ABC was a 39-year-old white female.",
            "source": "MUSCULOSKELETAL SYSTEM"
        },
        {
            "text": "The brain has a normal convolutional pattern and weighs 1300 grams.",
            "source": "CENTRAL NERVOUS SYSTEM"
        }
    ],
    "clinical_findings": [
        {
            "text": "Chloral Hydrate (Noctec)...
2025-11-24 16:04:52 - app.summarizer - INFO - LLM call succeeded (attempt 2, 57.44s)
2025-11-24 16:04:52 - app.summarizer - DEBUG - Parsed JSON: {
  "patient_snapshot": {
    "age": "39-year-old",
    "race": "white female"
  },
  "key_problems": [
    {
      "text": "ABC was a 39-year-old white female.",
      "source": "MUSCULOSKELETAL SYSTEM"
    },
    {
      "text": "The brain has a normal convolutional pattern and weighs 1300 grams.",
      "source": "CENTRAL NERVOUS SYSTEM"
    }
  ],
  "clinical_findings": [
    {
      "text": "Chloral Hydrate (Noctec) was present at toxic/lethal levels.",
      "source": "ACUTE COMBINED DRUG ...
2025-11-24 16:04:52 - app.summarizer - WARNING - Validation failed (attempt 1/2): patient_snapshot: Input should be a valid list...
2025-11-24 16:04:52 - app.summarizer - INFO - Retrying with validation error feedback...
2025-11-24 16:04:52 - app.summarizer - INFO - Calling LLM (model: qwen2.5:7b, temperature: 0.1)
2025-11-24 16:04:52 - app.summarizer - DEBUG - Prompt preview: # Text Summary Prompt

## SYSTEM ROLE

You are a medical documentation extraction assistant.

Your job is to extract only information that is explicitly present in the provided chunks of a clinical no...
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 16:04:52 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 16:05:07 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 21:05:07 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 16:05:07 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 16:05:07 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 16:05:41 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 16:05:41 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 16:05:41 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 16:05:41 - app.summarizer - DEBUG - LLM response (attempt 1): ```json
[
    {
        "text": "ABC was a 39-year-old white female.",
        "source": "PATIENT SNAPSHOTS"
    },
    {
        "text": "The manner of death is determined to be: ACCIDENT",
        "source": "MANNER OF DEATH"
    },
    {
        "text": "Chloral Hydrate (Noctec) was present in toxic/lethal levels.",
        "source": "FINAL PATHOLOGICAL DIAGNOSES"
    },
    {
        "text": "Trichloroethanol (TCE) 75ug/mL and Trichloroacetic acid (TCA) 85ug/mL were detected as active and ina...
2025-11-24 16:05:41 - app.summarizer - WARNING - JSON parsing failed (attempt 1/2): Response is a JSON array, but must be a JSON object with keys like 'patient_snapshot', 'key_problems', etc.
2025-11-24 16:05:41 - app.summarizer - INFO - Retrying with JSON parsing feedback...
2025-11-24 16:05:42 - app.summarizer - DEBUG - Retrying with JSON parsing feedback (attempt 2): Response is a JSON array, but must be a JSON object with keys like 'patient_snapshot', 'key_problems', etc.
2025-11-24 16:05:42 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 16:05:42 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 16:05:42 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 16:05:42 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 16:05:42 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 16:05:56 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 21:05:56 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 16:05:56 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 16:05:56 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 16:06:41 - app.summarizer - DEBUG - LLM response (attempt 2): ```json
{
    "patient_snapshot": [
        {
            "text": "ABC was a 39-year-old white female.",
            "source": "PATIENT SNAPSHOTS"
        }
    ],
    "key_problems": [
        {
            "text": "ACUTE COMBINED DRUG INTOXICATION",
            "source": "FINAL PATHOLOGICAL DIAGNOSES (chunk_22, chars 13755-14780)"
        },
        {
            "text": "LEFT GLUTEAL PANNICULITIS, WITH ABSCESS FORMATION AND RECENT LINEAR HEMORRHAGE.",
            "source": "FINAL PATHOLOGICAL...
2025-11-24 16:06:41 - app.summarizer - INFO - LLM call succeeded (attempt 2, 58.94s)
2025-11-24 16:06:41 - app.summarizer - DEBUG - Parsed JSON: {
  "patient_snapshot": [
    {
      "text": "ABC was a 39-year-old white female.",
      "source": "PATIENT SNAPSHOTS"
    }
  ],
  "key_problems": [
    {
      "text": "ACUTE COMBINED DRUG INTOXICATION",
      "source": "FINAL PATHOLOGICAL DIAGNOSES (chunk_22, chars 13755-14780)"
    },
    {
      "text": "LEFT GLUTEAL PANNICULITIS, WITH ABSCESS FORMATION AND RECENT LINEAR HEMORRHAGE.",
      "source": "FINAL PATHOLOGICAL DIAGNOSES (chunk_22, chars 13755-14780)"
    },
    {
      "text": "...
2025-11-24 16:06:41 - app.pipeline - INFO - ✓ Generated structured summary with 1 patient snapshot items, 14 problems, 0 history items, 0 medicines/allergies, 0 findings, 0 labs/imaging, 0 assessment items
2025-11-24 16:06:41 - app.summarizer - INFO - Saved structured summary to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/summary.json
2025-11-24 16:06:41 - app.pipeline - INFO - ✓ Saved structured summary to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/summary.json
2025-11-24 16:06:41 - app.pipeline - INFO - [STEP 5/6] Generating treatment plan...
2025-11-24 16:06:41 - app.pipeline - INFO -   Using structured summary (2132 characters)...
2025-11-24 16:06:41 - app.planner - INFO - Calling LLM (model: qwen2.5:7b, temperature: 0.1)
2025-11-24 16:06:41 - app.planner - DEBUG - Prompt preview: # Plan Generation Prompt

## SYSTEM ROLE

You generate a prioritized clinical recommendation plan using only the information present in the JSON summary provided.

You must never invent or infer infor...
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 16:06:41 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 16:06:50 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 21:06:50 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 16:06:50 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 16:06:50 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 16:06:50 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 16:06:50 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 16:06:50 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 16:06:50 - app.planner - DEBUG - LLM response (attempt 1): ```json
{
  "recommendations": []
}
```...
2025-11-24 16:06:50 - app.planner - INFO - LLM call succeeded (attempt 1, 9.60s)
2025-11-24 16:06:50 - app.planner - DEBUG - Parsed JSON: {
  "recommendations": []
}...
2025-11-24 16:06:50 - app.pipeline - INFO - ✓ Generated structured plan with 0 prioritized recommendations
2025-11-24 16:06:50 - app.planner - INFO - Saved structured plan to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/plan.json
2025-11-24 16:06:50 - app.pipeline - INFO - ✓ Saved plan to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/plan.json
2025-11-24 16:06:50 - app.pipeline - INFO - [STEP 6/6] Evaluating results...
2025-11-24 16:06:50 - app.evaluation - INFO - Evaluating semantic accuracy of plan recommendations using Ollama embeddings...
2025-11-24 16:06:50 - app.evaluation - INFO - Saved evaluation report to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/evaluation.json
2025-11-24 16:06:50 - app.pipeline - INFO - ✓ Saved evaluation to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8/evaluation.json
2025-11-24 16:06:50 - app.pipeline - INFO - 
[EVALUATION METRICS]
2025-11-24 16:06:50 - app.pipeline - INFO - Citation Coverage:
2025-11-24 16:06:50 - app.pipeline - INFO -   Summary: 100.0% (15/15)
2025-11-24 16:06:50 - app.pipeline - INFO -   Plan: 0.0% (0/0)
2025-11-24 16:06:50 - app.pipeline - INFO -   Overall: 100.0%
2025-11-24 16:06:50 - app.pipeline - INFO - 
Citation Validity: 85.7% (12/14)
2025-11-24 16:06:50 - app.pipeline - INFO - 
Hallucination Rate: 0.0% (0/15 orphan claims)
2025-11-24 16:06:50 - app.pipeline - INFO - 
Citation Overlap Jaccard: 0.2273 (avg, 66 pairs, range: 0.0000-1.0000)
2025-11-24 16:06:50 - app.pipeline - INFO - 
Span Consistency: 100.0% (12/12)
2025-11-24 16:06:50 - app.pipeline - INFO - 
Summary Statistics:
2025-11-24 16:06:50 - app.pipeline - INFO -   Total facts: 15
2025-11-24 16:06:50 - app.pipeline - INFO -   Total recommendations: 0
2025-11-24 16:06:50 - app.pipeline - INFO - 
✓ Pipeline completed successfully!
2025-11-24 16:06:50 - app.pipeline - INFO - Output directory: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/8
2025-11-24 16:06:50 - app.pipeline - INFO -   - canonical_text.txt
2025-11-24 16:06:50 - app.pipeline - INFO -   - toc.json
2025-11-24 16:06:50 - app.pipeline - INFO -   - chunks.json
2025-11-24 16:06:50 - app.pipeline - INFO -   - summary.json
2025-11-24 16:06:50 - app.pipeline - INFO -   - plan.json
2025-11-24 16:06:50 - app.pipeline - INFO -   - evaluation.json
2025-11-24 16:06:50 - app.pipeline - INFO -   - pipeline.log
