2025-11-24 15:50:34 - app.pipeline - INFO - Logging configured: file=/Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/pipeline.log, level=DEBUG
2025-11-24 15:50:34 - app.pipeline - INFO - Processing document: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/data/archive/mtsamples_pdf/mtsamples_pdf/20.pdf
2025-11-24 15:50:34 - app.pipeline - INFO - Output directory: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20
2025-11-24 15:50:34 - app.pipeline - INFO - Configuration: model=qwen2.5:7b, temperature=0.1
2025-11-24 15:50:34 - app.pipeline - INFO - Execution mode: toc_only=False, summary_only=False, plan_only=False, no_evaluation=False
2025-11-24 15:50:34 - app.pipeline - INFO - [STEP 1] Ingesting document: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/data/archive/mtsamples_pdf/mtsamples_pdf/20.pdf
2025-11-24 15:50:34 - app.ingestion - INFO - Loading PDF: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/data/archive/mtsamples_pdf/mtsamples_pdf/20.pdf
2025-11-24 15:50:34 - app.ingestion - INFO - Ingested document: 1205 characters, 1 pages, note_id: 20
2025-11-24 15:50:34 - app.pipeline - INFO - ✓ Ingested: 1205 chars, 1 pages, note_id: 20
2025-11-24 15:50:34 - app.pipeline - INFO - Saved canonical text to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/canonical_text.txt
2025-11-24 15:50:34 - app.pipeline - INFO - [STEP 2/6] Detecting sections...
2025-11-24 15:50:34 - app.sections - INFO - Overview section detected: end=180, title=Overview
2025-11-24 15:50:34 - app.sections - INFO - Found 3 section headers (after empty lines, all-caps): ['REASON FOR VISIT', 'PHYSICAL EXAMINATION', 'ASSESSMENT AND PLAN']
2025-11-24 15:50:34 - app.sections - INFO - Found 3 potential section headers
2025-11-24 15:50:34 - app.sections - INFO - Detected 4 sections: ['Overview', 'REASON FOR VISIT', 'PHYSICAL EXAMINATION', 'ASSESSMENT AND PLAN']
2025-11-24 15:50:34 - app.pipeline - INFO - ✓ Detected 4 sections
2025-11-24 15:50:34 - app.pipeline - INFO -   1. Overview (pages 1-1, chars 0-180)
2025-11-24 15:50:34 - app.pipeline - INFO -   2. REASON FOR VISIT (pages 1-1, chars 180-431)
2025-11-24 15:50:34 - app.pipeline - INFO -   3. PHYSICAL EXAMINATION (pages 1-1, chars 431-620)
2025-11-24 15:50:34 - app.pipeline - INFO -   4. ASSESSMENT AND PLAN (pages 1-1, chars 620-1205)
2025-11-24 15:50:34 - app.sections - INFO - Saved ToC to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/toc.json with 4 sections
2025-11-24 15:50:34 - app.pipeline - INFO - ✓ Saved ToC to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/toc.json
2025-11-24 15:50:34 - app.pipeline - INFO - [STEP 3/6] Creating chunks...
2025-11-24 15:50:34 - app.chunks - INFO - Created 4 chunks from 4 sections
2025-11-24 15:50:34 - app.pipeline - INFO - ✓ Created 4 chunks
2025-11-24 15:50:34 - app.chunks - INFO - Saved 4 chunks to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/chunks.json
2025-11-24 15:50:34 - app.pipeline - INFO - ✓ Saved chunks to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/chunks.json
2025-11-24 15:50:34 - app.pipeline - INFO - Initializing LLM client...
2025-11-24 15:50:34 - app.llm - INFO - ✓ Apple Silicon detected - MPS environment variables set for Ollama
2025-11-24 15:50:34 - app.llm - DEBUG - Note: Install PyTorch for MPS availability verification
2025-11-24 15:50:34 - app.llm - INFO - LLM client configured for GPU acceleration (MPS)
2025-11-24 15:50:34 - app.llm - INFO - Initialized LLM client with model: qwen2.5:7b, temperature: 0.1
2025-11-24 15:50:34 - app.pipeline - INFO - ✓ LLM client initialized (model: qwen2.5:7b)
2025-11-24 15:50:34 - app.pipeline - INFO - [STEP 4/6] Generating summary...
2025-11-24 15:50:34 - app.pipeline - INFO -   Processing 4 chunks at once...
2025-11-24 15:50:34 - app.summarizer - INFO - Calling LLM (model: qwen2.5:7b, temperature: 0.1)
2025-11-24 15:50:34 - app.summarizer - DEBUG - Prompt preview: # Text Summary Prompt

## SYSTEM ROLE

You are a medical documentation extraction assistant.

Your job is to extract only information that is explicitly present in the provided chunks of a clinical no...
2025-11-24 15:50:34 - httpcore.connection - DEBUG - connect_tcp.started host='localhost' port=11434 local_address=None timeout=None socket_options=None
2025-11-24 15:50:34 - httpcore.connection - DEBUG - connect_tcp.complete return_value=<httpcore._backends.sync.SyncStream object at 0x10f5f1810>
2025-11-24 15:50:34 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 15:50:34 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 15:50:34 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 15:50:34 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 15:50:34 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 15:50:42 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 20:50:42 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 15:50:42 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 15:50:42 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 15:51:16 - app.summarizer - DEBUG - LLM response (attempt 1): ```json
{
  "patient_snapshot": [
    { "text": "27-year-old woman", "source": "[OVERVIEW] section, chunk_0:0-19" }
  ],
  "key_problems": [
    { "text": "Morbid obesity. BMI is 51.", "source": "[ADMISSION DIAGNOSIS] section, chunk_1:259-308" },
    { "text": "Morbid obesity. BMI is 51.", "source": "[DISCHARGE DIAGNOSIS] section, chunk_2:308-357" }
  ],
  "pertinent_history": [
    { "text": "Suffered from morbid obesity for many years and made multiple attempts at nonsurgical weight loss witho...
2025-11-24 15:51:16 - app.summarizer - INFO - LLM call succeeded (attempt 1, 56.40s)
2025-11-24 15:51:16 - app.summarizer - DEBUG - Parsed JSON: {
  "patient_snapshot": [
    {
      "text": "27-year-old woman",
      "source": "[OVERVIEW] section, chunk_0:0-19"
    }
  ],
  "key_problems": [
    {
      "text": "Morbid obesity. BMI is 51.",
      "source": "[ADMISSION DIAGNOSIS] section, chunk_1:259-308"
    },
    {
      "text": "Morbid obesity. BMI is 51.",
      "source": "[DISCHARGE DIAGNOSIS] section, chunk_2:308-357"
    }
  ],
  "pertinent_history": [
    {
      "text": "Suffered from morbid obesity for many years and made mult...
2025-11-24 15:51:16 - app.pipeline - INFO - ✓ Generated structured summary with 1 patient snapshot items, 2 problems, 1 history items, 4 medicines/allergies, 1 findings, 0 labs/imaging, 3 assessment items
2025-11-24 15:51:16 - app.summarizer - INFO - Saved structured summary to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/19/summary.json
2025-11-24 15:51:16 - app.pipeline - INFO - ✓ Saved structured summary to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/19/summary.json
2025-11-24 15:51:16 - app.pipeline - INFO - [STEP 5/6] Generating treatment plan...
2025-11-24 15:51:16 - app.pipeline - INFO -   Using structured summary (1544 characters)...
2025-11-24 15:51:16 - app.planner - INFO - Calling LLM (model: qwen2.5:7b, temperature: 0.1)
2025-11-24 15:51:16 - app.planner - DEBUG - Prompt preview: # Plan Generation Prompt

## SYSTEM ROLE

You generate a prioritized clinical recommendation plan using only the information present in the JSON summary provided.

You must never invent or infer infor...
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 15:51:16 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 15:51:18 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 20:51:18 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 15:51:18 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 15:51:18 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 15:51:41 - app.summarizer - DEBUG - LLM response (attempt 1): ```json
{
  "patient_snapshot": [
    { "text": "Preop evaluation regarding gastric bypass surgery.", "source": "[REASON FOR VISIT] section, chunk_1:180-431" }
  ],
  "key_problems": [
    { "text": "Morbid obesity", "source": "[ASSESSMENT AND PLAN] section, chunk_3:620-759" }
  ],
  "pertinent_history": [],
  "medicines_allergies": [
    { "text": "Cleared for surgery.", "source": "[ASSESSMENT AND PLAN] section, chunk_3:1184-1205" }
  ],
  "objective_findings": [
    { "text": "Alert and orient...
2025-11-24 15:51:41 - app.summarizer - INFO - LLM call succeeded (attempt 1, 67.03s)
2025-11-24 15:51:41 - app.summarizer - DEBUG - Parsed JSON: {
  "patient_snapshot": [
    {
      "text": "Preop evaluation regarding gastric bypass surgery.",
      "source": "[REASON FOR VISIT] section, chunk_1:180-431"
    }
  ],
  "key_problems": [
    {
      "text": "Morbid obesity",
      "source": "[ASSESSMENT AND PLAN] section, chunk_3:620-759"
    }
  ],
  "pertinent_history": [],
  "medicines_allergies": [
    {
      "text": "Cleared for surgery.",
      "source": "[ASSESSMENT AND PLAN] section, chunk_3:1184-1205"
    }
  ],
  "objective_find...
2025-11-24 15:51:41 - app.pipeline - INFO - ✓ Generated structured summary with 1 patient snapshot items, 1 problems, 0 history items, 1 medicines/allergies, 2 findings, 0 labs/imaging, 2 assessment items
2025-11-24 15:51:41 - app.summarizer - INFO - Saved structured summary to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/summary.json
2025-11-24 15:51:41 - app.pipeline - INFO - ✓ Saved structured summary to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/summary.json
2025-11-24 15:51:41 - app.pipeline - INFO - [STEP 5/6] Generating treatment plan...
2025-11-24 15:51:41 - app.pipeline - INFO -   Using structured summary (1192 characters)...
2025-11-24 15:51:41 - app.planner - INFO - Calling LLM (model: qwen2.5:7b, temperature: 0.1)
2025-11-24 15:51:41 - app.planner - DEBUG - Prompt preview: # Plan Generation Prompt

## SYSTEM ROLE

You generate a prioritized clinical recommendation plan using only the information present in the JSON summary provided.

You must never invent or infer infor...
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - send_request_headers.started request=<Request [b'POST']>
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - send_request_headers.complete
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - send_request_body.started request=<Request [b'POST']>
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - send_request_body.complete
2025-11-24 15:51:41 - httpcore.http11 - DEBUG - receive_response_headers.started request=<Request [b'POST']>
2025-11-24 15:51:47 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 20:51:47 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 15:51:47 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 15:51:47 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 15:52:07 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 15:52:07 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 15:52:07 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 15:52:07 - app.planner - DEBUG - LLM response (attempt 1): ```json
{
  "recommendations": [
    {
      "number": 1,
      "recommendation": "Patient is stable for discharge. She may shower.",
      "source": "[DISCHARGE INSTRUCTIONS] section, chunk_8:2034-2159",
      "confidence": 1.0,
      "hallucination_guard_note": null
    },
    {
      "number": 2,
      "recommendation": "She needs to follow up in my office in 1 week for postoperative evaluation.",
      "source": "[DISCHARGE INSTRUCTIONS] section, chunk_8:2034-2159",
      "confidence": 1.0,
...
2025-11-24 15:52:07 - app.planner - INFO - LLM call succeeded (attempt 1, 51.06s)
2025-11-24 15:52:07 - app.planner - DEBUG - Parsed JSON: {
  "recommendations": [
    {
      "number": 1,
      "recommendation": "Patient is stable for discharge. She may shower.",
      "source": "[DISCHARGE INSTRUCTIONS] section, chunk_8:2034-2159",
      "confidence": 1.0,
      "hallucination_guard_note": null
    },
    {
      "number": 2,
      "recommendation": "She needs to follow up in my office in 1 week for postoperative evaluation.",
      "source": "[DISCHARGE INSTRUCTIONS] section, chunk_8:2034-2159",
      "confidence": 1.0,
      "h...
2025-11-24 15:52:07 - app.pipeline - INFO - ✓ Generated structured plan with 4 prioritized recommendations
2025-11-24 15:52:07 - app.planner - INFO - Saved structured plan to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/19/plan.json
2025-11-24 15:52:07 - app.pipeline - INFO - ✓ Saved plan to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/19/plan.json
2025-11-24 15:52:07 - app.pipeline - INFO - [STEP 6/6] Evaluating results...
2025-11-24 15:52:07 - app.evaluation - INFO - Evaluating semantic accuracy of plan recommendations using Ollama embeddings...
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:07 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:08 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:08 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:08 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:08 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:08 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:08 - app.evaluation - INFO - Saved evaluation report to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/19/evaluation.json
2025-11-24 15:52:08 - app.pipeline - INFO - ✓ Saved evaluation to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/19/evaluation.json
2025-11-24 15:52:08 - app.pipeline - INFO - 
[EVALUATION METRICS]
2025-11-24 15:52:08 - app.pipeline - INFO - Citation Coverage:
2025-11-24 15:52:08 - app.pipeline - INFO -   Summary: 100.0% (12/12)
2025-11-24 15:52:08 - app.pipeline - INFO -   Plan: 100.0% (4/4)
2025-11-24 15:52:08 - app.pipeline - INFO -   Overall: 100.0%
2025-11-24 15:52:08 - app.pipeline - INFO - 
Citation Validity: 75.0% (12/16)
2025-11-24 15:52:08 - app.pipeline - INFO - 
Hallucination Rate: 0.0% (0/16 orphan claims)
2025-11-24 15:52:08 - app.pipeline - INFO - 
Citation Overlap Jaccard: 0.0438 (avg, 120 pairs, range: 0.0000-1.0000)
2025-11-24 15:52:08 - app.pipeline - INFO - 
Span Consistency: 100.0% (16/16)
2025-11-24 15:52:08 - app.pipeline - INFO - 
Summary Statistics:
2025-11-24 15:52:08 - app.pipeline - INFO -   Total facts: 12
2025-11-24 15:52:08 - app.pipeline - INFO -   Total recommendations: 4
2025-11-24 15:52:08 - app.pipeline - INFO -   Average confidence: 1.00
2025-11-24 15:52:08 - app.pipeline - INFO - 
✓ Pipeline completed successfully!
2025-11-24 15:52:08 - app.pipeline - INFO - Output directory: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/19
2025-11-24 15:52:08 - app.pipeline - INFO -   - canonical_text.txt
2025-11-24 15:52:08 - app.pipeline - INFO -   - toc.json
2025-11-24 15:52:08 - app.pipeline - INFO -   - chunks.json
2025-11-24 15:52:08 - app.pipeline - INFO -   - summary.json
2025-11-24 15:52:08 - app.pipeline - INFO -   - plan.json
2025-11-24 15:52:08 - app.pipeline - INFO -   - evaluation.json
2025-11-24 15:52:08 - app.pipeline - INFO -   - pipeline.log
2025-11-24 15:52:08 - root - INFO - [20/21] ✓ 19.pdf
2025-11-24 15:52:11 - httpcore.http11 - DEBUG - receive_response_headers.complete return_value=(b'HTTP/1.1', 200, b'OK', [(b'Content-Type', b'application/x-ndjson'), (b'Date', b'Mon, 24 Nov 2025 20:52:11 GMT'), (b'Transfer-Encoding', b'chunked')])
2025-11-24 15:52:11 - httpx - INFO - HTTP Request: POST http://localhost:11434/api/chat "HTTP/1.1 200 OK"
2025-11-24 15:52:11 - httpcore.http11 - DEBUG - receive_response_body.started request=<Request [b'POST']>
2025-11-24 15:52:21 - httpcore.http11 - DEBUG - receive_response_body.complete
2025-11-24 15:52:21 - httpcore.http11 - DEBUG - response_closed.started
2025-11-24 15:52:21 - httpcore.http11 - DEBUG - response_closed.complete
2025-11-24 15:52:21 - app.planner - DEBUG - LLM response (attempt 1): ```json
{
  "recommendations": [
    {
      "number": 1,
      "recommendation": "We will continue on the Medifast diet until the time of surgery and cleared for surgery.",
      "source": "[ASSESSMENT AND PLAN] section, chunk_3:620-1205",
      "confidence": 1.0,
      "hallucination_guard_note": null
    },
    {
      "number": 2,
      "recommendation": "Risks and benefits of the procedure were reiterated with the patient and significant other and mother, which included but not limited to d...
2025-11-24 15:52:21 - app.planner - INFO - LLM call succeeded (attempt 1, 40.18s)
2025-11-24 15:52:21 - app.planner - DEBUG - Parsed JSON: {
  "recommendations": [
    {
      "number": 1,
      "recommendation": "We will continue on the Medifast diet until the time of surgery and cleared for surgery.",
      "source": "[ASSESSMENT AND PLAN] section, chunk_3:620-1205",
      "confidence": 1.0,
      "hallucination_guard_note": null
    },
    {
      "number": 2,
      "recommendation": "Risks and benefits of the procedure were reiterated with the patient and significant other and mother, which included but not limited to death, pu...
2025-11-24 15:52:21 - app.pipeline - INFO - ✓ Generated structured plan with 2 prioritized recommendations
2025-11-24 15:52:21 - app.planner - INFO - Saved structured plan to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/plan.json
2025-11-24 15:52:21 - app.pipeline - INFO - ✓ Saved plan to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/plan.json
2025-11-24 15:52:21 - app.pipeline - INFO - [STEP 6/6] Evaluating results...
2025-11-24 15:52:21 - app.evaluation - INFO - Evaluating semantic accuracy of plan recommendations using Ollama embeddings...
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - Starting new HTTP connection (1): 127.0.0.1:11434
2025-11-24 15:52:21 - urllib3.connectionpool - DEBUG - http://127.0.0.1:11434 "POST /api/embeddings HTTP/1.1" 200 None
2025-11-24 15:52:21 - app.evaluation - INFO - Saved evaluation report to /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/evaluation.json
2025-11-24 15:52:21 - app.pipeline - INFO - ✓ Saved evaluation to: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20/evaluation.json
2025-11-24 15:52:21 - app.pipeline - INFO - 
[EVALUATION METRICS]
2025-11-24 15:52:21 - app.pipeline - INFO - Citation Coverage:
2025-11-24 15:52:21 - app.pipeline - INFO -   Summary: 100.0% (7/7)
2025-11-24 15:52:21 - app.pipeline - INFO -   Plan: 100.0% (2/2)
2025-11-24 15:52:21 - app.pipeline - INFO -   Overall: 100.0%
2025-11-24 15:52:21 - app.pipeline - INFO - 
Citation Validity: 100.0% (9/9)
2025-11-24 15:52:21 - app.pipeline - INFO - 
Hallucination Rate: 0.0% (0/9 orphan claims)
2025-11-24 15:52:21 - app.pipeline - INFO - 
Citation Overlap Jaccard: 0.1805 (avg, 36 pairs, range: 0.0000-1.0000)
2025-11-24 15:52:21 - app.pipeline - INFO - 
Span Consistency: 100.0% (9/9)
2025-11-24 15:52:21 - app.pipeline - INFO - 
Summary Statistics:
2025-11-24 15:52:21 - app.pipeline - INFO -   Total facts: 7
2025-11-24 15:52:21 - app.pipeline - INFO -   Total recommendations: 2
2025-11-24 15:52:21 - app.pipeline - INFO -   Average confidence: 1.00
2025-11-24 15:52:21 - app.pipeline - INFO - 
✓ Pipeline completed successfully!
2025-11-24 15:52:21 - app.pipeline - INFO - Output directory: /Users/davidavinci/Documents/GitHub/clinicalnoteparser/results/20
2025-11-24 15:52:21 - app.pipeline - INFO -   - canonical_text.txt
2025-11-24 15:52:21 - app.pipeline - INFO -   - toc.json
2025-11-24 15:52:21 - app.pipeline - INFO -   - chunks.json
2025-11-24 15:52:21 - app.pipeline - INFO -   - summary.json
2025-11-24 15:52:21 - app.pipeline - INFO -   - plan.json
2025-11-24 15:52:21 - app.pipeline - INFO -   - evaluation.json
2025-11-24 15:52:21 - app.pipeline - INFO -   - pipeline.log
2025-11-24 15:52:21 - root - INFO - [21/21] ✓ 20.pdf
